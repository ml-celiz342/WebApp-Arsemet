<h2 class="titulo-pagina">Roles</h2>
<div class="roles-contenedor">
  <div class="roles-contenedor-filtro">
    <mat-card class="mat-card-custom mat-elevation-z4">
      <div class="filtro-header">
        <span class="filtro-texto">
          <strong>Gestión de roles</strong>
        </span>
        <div class="filtro-botones">
          <mat-spinner *ngIf="cargando"></mat-spinner>
          <button mat-icon-button (click)="recargar()" matTooltip="Recargar roles">
            <mat-icon>refresh</mat-icon>
          </button>
          <button mat-icon-button (click)="agregarEditarRol()"
           *ngIf=" (authService.hasPermission('roles','write') &&authService.hasPermission('modules','read'))"
            matTooltip="Agregar rol"
           >
            <mat-icon class="agregar-icono">add_circle</mat-icon>
          </button>
        </div>
      </div>
    </mat-card>
  </div>

  <!-- Roles -->
  <div class="roles-contenedor-tabla">
    <mat-card class="mat-card-custom mat-elevation-z4">
      <div class="roles-contenedor-element">
        <div class="table-wrapper">
          <table mat-table [dataSource]="dataSourceRoles" class="table">
            <ng-container matColumnDef="nombre">
              <th mat-header-cell *matHeaderCellDef>Rol</th>
              <td mat-cell *matCellDef="let element">{{ element.nombre }}</td>
            </ng-container>

            <ng-container matColumnDef="duracion">
              <th mat-header-cell *matHeaderCellDef>Duración token</th>
              <td mat-cell *matCellDef="let element">{{ element.token_duracion }}</td>
            </ng-container>

            <ng-container matColumnDef="cantidad">
              <th mat-header-cell *matHeaderCellDef>Cantidad token</th>
              <td mat-cell *matCellDef="let element">{{ element.token_cantidad }}</td>
            </ng-container>

            <ng-container matColumnDef="acciones">
              <th mat-header-cell *matHeaderCellDef>Acciones</th>
              <td mat-cell *matCellDef="let element">
                 <button
                  mat-icon-button
                  (click)="verModulos(element)"
                  [disabled]="element.low_date"
                  *ngIf=" (authService.hasPermission('roles','read') && authService.hasPermission('modules','read'))"
                  matTooltip="Ver  módulos y permisos"
                  >
                  <mat-icon [ngClass]="{ 'ver-icono': !element.low_date }"
                    >visibility</mat-icon
                  >
                </button>
                <button
                  mat-icon-button
                  (click)="agregarEditarRol(element)"
                  [disabled]="element.low_date"
                  *ngIf=" (authService.hasPermission('roles','edit') &&authService.hasPermission('modules','read'))"
                  matTooltip="Editar rol"
                  >
                  <mat-icon [ngClass]="{ 'editar-icono': !element.low_date }"
                    >edit</mat-icon
                  >
                </button>
                <button
                  mat-icon-button
                  (click)="eliminarRol(element)"
                  [disabled]="element.low_date"
                  *ngIf=" (authService.hasPermission('roles','edit'))"
                  matTooltip="Eliminar rol"
                  >
                  <mat-icon [ngClass]="{ 'eliminar-icono': !element.low_date }"
                    >delete</mat-icon
                  >
                </button>
              </td>
            </ng-container>
            <tr
              mat-header-row
              *matHeaderRowDef="displayedColumnsData"
              class="table-header"
            ></tr>
            <tr
              mat-row
              *matRowDef="let row; columns: displayedColumnsData"
            ></tr>
          </table>
        </div>
        <mat-paginator
          #paginatorData
          [pageSizeOptions]="[10, 20]"
          showFirstLastButtons
          class="table-paginator"
        ></mat-paginator>
      </div>
    </mat-card>
  </div>

  <div class="contenedor-modelos-paneles">
  <!-- Modelos -->
  <div class="roles-contenedor-tabla-tipos">
    <mat-card class="mat-card-custom mat-elevation-z4">
      <div class="roles-contenedor-element">
        <div class="table-wrapper">
          <table mat-table [dataSource]="dataSourceModulo" class="table">
            <!-- type -->
            <ng-container matColumnDef="nombre">
              <th mat-header-cell *matHeaderCellDef>Módulo</th>
              <td mat-cell *matCellDef="let element">
                {{ element.nombre }}
              </td>
            </ng-container>

            <!-- Acciones -->
            <ng-container matColumnDef="acciones">
              <th mat-header-cell *matHeaderCellDef>
                <div class="acciones-cell">
                  Acción
                  <button mat-icon-button (click)="agregarModulo()"
                   *ngIf=" (authService.hasPermission('modules','write'))"
                     matTooltip="Agregar módulo"
                  >
                    <mat-icon class="agregar-icono">add_circle</mat-icon>
                  </button>
                </div>
              </th>
              <td mat-cell *matCellDef="let element">
                <div class="acciones-cell">
                  <!-- Botón para Eliminar -->
                  <button mat-icon-button (click)="eliminarModulo(element)"
                   *ngIf=" (authService.hasPermission('modules','edit'))"
                    matTooltip="Eliminar módulo"
                  >
                    <mat-icon class="eliminar-icono">delete</mat-icon>
                  </button>
                </div>
              </td>
            </ng-container>
            <tr
              mat-header-row
              *matHeaderRowDef="displayedColumnsModulo"
              class="table-header"
            ></tr>
            <tr
              mat-row
              *matRowDef="let row; columns: displayedColumnsModulo"
            ></tr>
          </table>
        </div>
        <mat-paginator
          #paginatorTipo
          [hidePageSize]="true"
          [pageSizeOptions]="[20]"
          showFirstLastButtons
          class="table-paginator"
        ></mat-paginator>
      </div>
    </mat-card>
  </div>

  <!-- paneles -->
  <div class="roles-contenedor-tabla-tipos">
    <mat-card class="mat-card-custom mat-elevation-z4">
      <div class="roles-contenedor-element">
        <div class="table-wrapper">
          <table mat-table [dataSource]="dataSourcePanel" class="table">
            <!-- type -->
            <ng-container matColumnDef="nombre">
              <th mat-header-cell *matHeaderCellDef>Paneles</th>
              <td mat-cell *matCellDef="let element">
                {{ element.nombre }}
              </td>
            </ng-container>

            <!-- Acciones -->
            <ng-container matColumnDef="acciones">
              <th mat-header-cell *matHeaderCellDef>
                <div class="acciones-cell">
                  Acción
                  <button mat-icon-button (click)="agregarPanel()"
                   *ngIf=" (authService.hasPermission('panels','write'))"
                     matTooltip="Agregar panel"
                  >
                    <mat-icon class="agregar-icono">add_circle</mat-icon>
                  </button>
                </div>
              </th>
              <td mat-cell *matCellDef="let element">
                <div class="acciones-cell">
                  <!-- Botón para Eliminar -->
                  <button mat-icon-button (click)="eliminarPanel(element)"
                   *ngIf=" (authService.hasPermission('panels','edit'))"
                    matTooltip="Eliminar panel"
                  >
                    <mat-icon class="eliminar-icono">delete</mat-icon>
                  </button>
                </div>
              </td>
            </ng-container>
            <tr
              mat-header-row
              *matHeaderRowDef="displayedColumnsPanel"
              class="table-header"
            ></tr>
            <tr
              mat-row
              *matRowDef="let row; columns: displayedColumnsPanel"
            ></tr>
          </table>
        </div>
        <mat-paginator
          #paginatorPanel
          [hidePageSize]="true"
          [pageSizeOptions]="[20]"
          showFirstLastButtons
          class="table-paginator"
        ></mat-paginator>
      </div>
    </mat-card>
  </div>

  </div>
</div>


