<h2 class="titulo-pagina">Sesiones</h2>

<div class="sesiones-contenedor">
  <!-- Sesiones de Usuarios -->
  <mat-card class="mat-card-custom mat-elevation-z4 card-sesiones">
    <h3>Sesiones de Usuarios</h3>
    <div class="sesion-table-wrapper">
      <table mat-table [dataSource]="sesionesUser" class="sesion-table">
        <ng-container matColumnDef="name">
          <th mat-header-cell *matHeaderCellDef> Usuario </th>
          <td mat-cell *matCellDef="let row">{{ row.name }}</td>
        </ng-container>

        <ng-container matColumnDef="status">
          <th mat-header-cell *matHeaderCellDef> Estado </th>
          <td mat-cell *matCellDef="let row">
            <span [ngClass]="{
              'text-connected': row.status === 'CONNECTED',
              'text-timeout': row.status === 'TIMEOUT',
              'text-disconnected': row.status === 'DISCONNECTED',
              'text-idle': row.status === 'IDLE'
            }">
              {{ row.status }}
            </span>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedUserColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedUserColumns;"></tr>
      </table>
    </div>
  </mat-card>

  <!-- Sesiones de Dispositivos -->
  <mat-card class="mat-card-custom mat-elevation-z4 card-sesiones">
    <h3>Sesiones de Dispositivos</h3>
    <div class="sesion-table-wrapper">
      <table mat-table [dataSource]="sesionesDevice" class="sesion-table">

        <ng-container matColumnDef="code_assets">
          <th mat-header-cell *matHeaderCellDef>Código</th>
          <td mat-cell *matCellDef="let row">{{ row.code_assets }}</td>
        </ng-container>

        <ng-container matColumnDef="serie_number">
          <th mat-header-cell *matHeaderCellDef> Serie </th>
          <td mat-cell *matCellDef="let row">{{ row.serie_number }}</td>
        </ng-container>

        <ng-container matColumnDef="status">
          <th mat-header-cell *matHeaderCellDef> Estado </th>
          <td mat-cell *matCellDef="let row">
            <span [ngClass]="{
              'text-connected': row.status === 'CONNECTED',
              'text-timeout': row.status === 'TIMEOUT',
              'text-disconnected': row.status === 'DISCONNECTED',
              'text-idle': row.status === 'IDLE'
            }">
              {{ row.status }}
            </span>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedDeviceColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedDeviceColumns;"></tr>
      </table>
    </div>
  </mat-card>
</div>

<!-- VIEJO
<div class="sesion-status">
  <mat-card *ngFor="let user of sesionesUser" class="sesion-status-item">
    <mat-card-title class="sesion-status-title">
      <p class="sesion-status-title-text">{{ user.name }}</p>
    </mat-card-title>
    <mat-card-content class="sesion-status-content">
      <div class="sesion-status-total-info-wrapper">
        <div class="sesion-status-total-info">
          <p
            class="sesion-status-total-info-name"
            [ngClass]="{
              'text-connected': user.status === 'CONNECTED',
              'text-timeout': user.status === 'TIMEOUT',
              'text-disconnected': user.status === 'DISCONNECTED',
              'text-idle': user.status === 'IDLE'
            }"
          >
            {{ user.status }}
          </p>
        </div>
      </div>
    </mat-card-content>
  </mat-card>
</div>

<div class="sesion-status">
  <mat-card *ngFor="let device of sesionesDevice" class="sesion-status-item">
    <mat-card-title class="sesion-status-title">
      <p class="sesion-status-title-text">{{ device.code_assets }}</p>
      <p class="sesion-status-subtitle">{{ device.serie_number }}</p>
    </mat-card-title>
    <mat-card-content class="sesion-status-content">
      <div class="sesion-status-total-info-wrapper">
        <div class="sesion-status-total-info">
          <p
            class="sesion-status-total-info-name"
            [ngClass]="{
              'text-connected': device.status === 'CONNECTED',
              'text-timeout': device.status === 'TIMEOUT',
              'text-disconnected': device.status === 'DISCONNECTED',
              'text-idle': device.status === 'IDLE'
            }"
          >
            {{ device.status }}
          </p>
        </div>
      </div>
    </mat-card-content>
  </mat-card>
</div>
-->

<div class="sesion-info">
  <div class="sesion-info-table">
    <mat-card class="mat-card-custom mat-elevation-z4">
      <div class="sesion-info-table-element">
        <app-sesiones-info
          titulo="Información usuarios"
          [sesiones]="sesionesUsersInfo"
          [total]="totalUsersInfo"
          [pageSize]="pageSizeUsersInfo"
          (pageChange)="onPageChangeUser($event)"
        ></app-sesiones-info>
      </div>
    </mat-card>
  </div>
  <div class="sesion-info-table">
    <mat-card class="mat-card-custom mat-elevation-z4">
      <div class="sesion-info-table-element">
        <app-sesiones-info
          titulo="Información dispositivos"
          [sesiones]="sesionesAssetsInfo"
          [total]="totalAssetsInfo"
          [pageSize]="pageSizeAssetsInfo"
          (pageChange)="onPageChangeAssets($event)"
        ></app-sesiones-info>
      </div>
    </mat-card>
  </div>
</div>
