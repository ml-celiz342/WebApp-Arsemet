<h2 class="titulo-pagina">Tareas</h2>
<div class="tareas-contenedor">
  <div class="tareas-contenedor-filtro">
    <mat-card class="mat-card-custom mat-elevation-z4">
      <div class="filtro-header">
        <span class="filtro-texto">
          <strong>Filtro de datos:</strong>
          {{ range.start | date : "dd/MM/yyyy HH:mm:ss" }} -
          {{ range.end | date : "dd/MM/yyyy HH:mm:ss" }}
        </span>

        <!-- FILTROS -->
        <div class="filtro-botones">

          <!-- Spinner -->
          <mat-spinner *ngIf="cargando"></mat-spinner>

          <!-- Cargar csv -->
          <!-- *ngIf="authService.hasPermission('tasks', 'write')" -->
          <button
            mat-icon-button
            (click)="cargarCsv()"

            matTooltip="Cargar archivo .CSV"
          >
            <mat-icon class="agregar-icono">add_circle</mat-icon>
          </button>

          <!-- Boton recargar -->
          <button mat-icon-button (click)="recargar()" matTooltip="Recargar tareas">
            <mat-icon>refresh</mat-icon>
          </button>

          <!-- Filtro por fecha -->
          <button mat-icon-button matTooltip="Aplicar filtros" (click)="openDialog()">
            <mat-icon>filter_list</mat-icon>
          </button>

        </div>

      </div>
    </mat-card>
  </div>

  <!-- Tareas -->
  <div class="contenedor-tareas">
    <mat-card class="mat-card-custom mat-elevation-z4">
      <div class="tareas-contenedor-element">
        <div class="table-wrapper scroll-x">
          <table mat-table [dataSource]="dataSourceTasks" class="table table-tareas">

            <!-- COLUMNA: Producto -->
            <ng-container matColumnDef="product">
              <th mat-header-cell *matHeaderCellDef>Producto</th>
              <td mat-cell *matCellDef="let element">
                {{ element.asset_code }}
              </td>
            </ng-container>

            <!-- COLUMNA: Hora Inicio Estimada -->
            <ng-container matColumnDef="estimated_start_time">
              <th mat-header-cell *matHeaderCellDef>Hs Inicio Estimada</th>
              <td mat-cell *matCellDef="let element">
                {{ element.part_code }}
              </td>
            </ng-container>

            <!-- COLUMNA: Hora Inicio Real -->
            <ng-container matColumnDef="actual_start_time">
              <th mat-header-cell *matHeaderCellDef>Hs Inicio Real</th>
              <td mat-cell *matCellDef="let element">
                {{ element.quantity }}
              </td>
            </ng-container>

            <!-- COLUMNA: Hora Fin Estimada -->
            <ng-container matColumnDef="estimated_end_time">
              <th mat-header-cell *matHeaderCellDef>Hs Fin Estimada</th>
              <td mat-cell *matCellDef="let element">
                {{ element.detail }}
              </td>
            </ng-container>

            <!-- COLUMNA: Hora fin Real -->
            <ng-container matColumnDef="actual_end_time">
              <th mat-header-cell *matHeaderCellDef>Hs Fin Real</th>
              <td mat-cell *matCellDef="let element">
                {{ element.start | date:'dd/MM/yyyy HH:mm:ss' }}
              </td>
            </ng-container>

            <!-- COLUMNA: Duracion Estimada -->
            <ng-container matColumnDef="estimated_duration">
              <th mat-header-cell *matHeaderCellDef>Duración Estimada</th>
              <td mat-cell *matCellDef="let element">
                {{ element.end ? (element.end | date:'dd/MM/yyyy HH:mm:ss') : '-' }}
              </td>
            </ng-container>

            <!-- COLUMNA: Duracion Real -->
            <ng-container matColumnDef="actual_duration">
              <th mat-header-cell *matHeaderCellDef>Duración Real</th>
              <td mat-cell *matCellDef="let element">
                {{ element.user_name }}
              </td>
            </ng-container>

            <!-- COLUMNA: Cliente -->
            <ng-container matColumnDef="client">
              <th mat-header-cell *matHeaderCellDef>Cliente</th>
              <td mat-cell *matCellDef="let element">
                {{ element.user_name }}
              </td>
            </ng-container>

            <tr
              mat-header-row
              *matHeaderRowDef="displayedColumnsTasks"
              class="table-header"
            ></tr>
            <tr
              mat-row
              *matRowDef="let row; columns: displayedColumnsTasks"
            ></tr>
          </table>
        </div>
        <mat-paginator
          #paginatorData
          [pageSizeOptions]="[10, 20]"
          showFirstLastButtons
          class="table-paginator"
        ></mat-paginator>
      </div>
    </mat-card>
  </div>

</div>

<!-- Boton ver pdf
  <button mat-icon-button (click)="onPlanosClick(element)"
    disabled]="element.low_date"
    *ngIf=" (authService.hasPermission('roles','read') &&authService.hasPermission('modules','read'))"
    matTooltip="Ver pdf"
  >
    <mat-icon class="visibility-icon">visibility</mat-icon>
  </button>
-->
